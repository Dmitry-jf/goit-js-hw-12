{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\n// - запит\n\nimport axios from \"axios\";\n\n\n\nexport async function getImagesByQuery(query, page) {\n  const params = {\n    q: query,\n    key: '52578833-1380a7e48419fcc1cc100434d',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page,\n  };\n\n  const response = await axios.get('https://pixabay.com/api/', { params })\n\n  return {\n    hits: response.data.hits,\n    totalHits: response.data.totalHits,\n  }\n}\n","// - розмітка\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const gallery = document.querySelector(\".gallery\");\nexport const loader = document.querySelector(\".loader\");\nexport const loadMoreBtn = document.querySelector(\".loader-btn\")\n\nexport const lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 150,\n});\n\nexport function createGallery(images) {\n return images\n     .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => `\n<li class=\"photo-card\">\n  <a href=\"${largeImageURL}\" class=\"gallery-link\" aria-label=\"${tags}\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  </a>\n  <div class=\"info\">\n    <p class=\"info-item\"><b>Likes</b><span>${likes}</span></p>\n    <p class=\"info-item\"><b>Views</b><span>${views}</span></p>\n    <p class=\"info-item\"><b>Comments</b><span>${comments}</span></p>\n    <p class=\"info-item\"><b>Downloads</b><span>${downloads}</span></p>\n  </div>\n</li>`\n    ).join('');\n}\n  \n export function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n  loader.classList.add(\"hidden\");\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove(\"hidden\");\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add(\"hidden\");\n}","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  hideLoadMoreButton,\n  showLoadMoreButton,\n  gallery,\n  lightbox,\n} from \"./js/render-functions.js\";\n\n\nconst refs = {\n  form: document.querySelector('.form'),\n   loadMoreBtn: document.querySelector(\".loader-btn\"),\n};\n\n\n\nconst Page_Size = 15;\nlet query;\nlet currentPage;\nlet totalPages;\n\nhideLoadMoreButton();\n\nrefs.form.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    const formData = new FormData(e.target);\n    query = formData.get(\"search-text\").trim();\n    currentPage = 1;\n\n\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(query, currentPage)\n        hideLoader();\n\n\n\n        if (data.hits.length === 0) {\n            iziToast.error({\n                title: \"\",\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\",\n            });\n            return\n        }\n\n        const markup = createGallery(data.hits);\n        gallery.innerHTML = markup;\n        lightbox.refresh()\n \n      totalPages = Math.ceil(data.totalHits / Page_Size);\n\n    \n        if (currentPage < totalPages) {\n            showLoadMoreButton();\n        }\n    }\n    catch {(err)\n        console.error(err);\n        hideLoader();\n    }\n\n    e.target.reset();\n});\n\n\n\nrefs.loadMoreBtn.addEventListener(\"click\", async () => {\n    currentPage += 1;\n\n    showLoader();\n    hideLoadMoreButton();\n\n\n try {\n    const data = await getImagesByQuery(query, currentPage);\n     hideLoader();\n     \n    const markup = createGallery(data.hits);\n    gallery.insertAdjacentHTML(\"beforeend\", markup)\n    lightbox.refresh();\n\n    if (currentPage >= totalPages) {\n        hideLoadMoreButton();\n        iziToast.info({\n        title: \"\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n      });\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (err) {\n    console.error(err);\n    hideLoader();\n  }\n});"],"names":["getImagesByQuery","query","page","params","response","axios","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","refs","Page_Size","currentPage","totalPages","e","data","iziToast","markup","err"],"mappings":"owBAOO,eAAeA,EAAiBC,EAAOC,EAAM,CAClD,MAAMC,EAAS,CACb,EAAGF,EACH,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACJ,EAEQE,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAAE,OAAAF,EAAQ,EAEvE,MAAO,CACL,KAAMC,EAAS,KAAK,KACpB,UAAWA,EAAS,KAAK,SAC1B,CACH,CCnBO,MAAME,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,aAAa,EAElDC,EAAW,IAAIC,EAAe,aAAc,CACvD,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CACrC,OAAOA,EACF,IACE,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACV,IAAc;AAAA;AAAA,aAEDL,CAAa,sCAAsCC,CAAI;AAAA,gBACpDF,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,6CAGGC,CAAK;AAAA,6CACLC,CAAK;AAAA,gDACFC,CAAQ;AAAA,iDACPC,CAAS;AAAA;AAAA,MAG1D,EAAM,KAAK,EAAE,CACb,CAEQ,SAASC,GAAe,CAC9Bd,EAAQ,UAAY,EACtB,CAEO,SAASe,GAAa,CAC3Bd,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEO,SAASe,GAAa,CAC3Bf,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEO,SAASgB,GAAqB,CACnCf,EAAY,UAAU,OAAO,QAAQ,CACvC,CAEO,SAASgB,GAAqB,CACnChB,EAAY,UAAU,IAAI,QAAQ,CACpC,CCzCA,MAAMiB,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACnC,YAAa,SAAS,cAAc,aAAa,CACpD,EAIMC,EAAY,GAClB,IAAIzB,EACA0B,EACAC,EAEJJ,IAEAC,EAAK,KAAK,iBAAiB,SAAU,MAAMI,GAAK,CAC5CA,EAAE,eAAc,EAGhB5B,EADiB,IAAI,SAAS4B,EAAE,MAAM,EACrB,IAAI,aAAa,EAAE,KAAI,EACxCF,EAAc,EAGdP,IACAI,IACAH,IAEA,GAAI,CACA,MAAMS,EAAO,MAAM9B,EAAiBC,EAAO0B,CAAW,EAKtD,GAJAL,IAIIQ,EAAK,KAAK,SAAW,EAAG,CACxBC,EAAS,MAAM,CACX,MAAO,GACP,QAAS,2EACT,SAAU,UAC1B,CAAa,EACD,MACH,CAED,MAAMC,EAASrB,EAAcmB,EAAK,IAAI,EACtCxB,EAAQ,UAAY0B,EACpBvB,EAAS,QAAS,EAEpBmB,EAAa,KAAK,KAAKE,EAAK,UAAYJ,CAAS,EAG3CC,EAAcC,GACdL,GAEP,MACK,CAAE,IACJ,QAAQ,MAAM,GAAG,EACjBD,GACH,CAEDO,EAAE,OAAO,OACb,CAAC,EAIDJ,EAAK,YAAY,iBAAiB,QAAS,SAAY,CACnDE,GAAe,EAEfN,IACAG,IAGH,GAAI,CACD,MAAMM,EAAO,MAAM9B,EAAiBC,EAAO0B,CAAW,EACrDL,IAED,MAAMU,EAASrB,EAAcmB,EAAK,IAAI,EACtCxB,EAAQ,mBAAmB,YAAa0B,CAAM,EAC9CvB,EAAS,QAAO,EAEZkB,GAAeC,GACfJ,IACAO,EAAS,KAAK,CACd,MAAO,GACP,QAAS,6DACT,SAAU,UAClB,CAAO,GAEDR,GAEH,OAAQU,EAAK,CACZ,QAAQ,MAAMA,CAAG,EACjBX,GACD,CACH,CAAC"}